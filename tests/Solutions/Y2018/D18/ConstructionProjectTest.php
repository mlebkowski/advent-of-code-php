<?php
declare(strict_types=1);

namespace App\Solutions\Y2018\D18;

use App\Realms\Cartography\Map;
use PHPUnit\Framework\TestCase;

final class ConstructionProjectTest extends TestCase
{
    public function test()
    {
        $given = [
            <<<MAP
            .#.#...|#.
            .....#|##|
            .|..|...#.
            ..|#.....#
            #.#|||#|#|
            ...#.||...
            .|....|...
            ||...#|.#|
            |.||||..|.
            ...#.|..|.
            MAP,

            <<<MAP
            .......##.
            ......|###
            .|..|...#.
            ..|#||...#
            ..##||.|#|
            ...#||||..
            ||...|||..
            |||||.||.|
            ||||||||||
            ....||..|.
            MAP,

            <<<MAP
            .......#..
            ......|#..
            .|.|||....
            ..##|||..#
            ..###|||#|
            ...#|||||.
            |||||||||.
            ||||||||||
            ||||||||||
            .|||||||||
            MAP,

            <<<MAP
            .......#..
            ....|||#..
            .|.||||...
            ..###|||.#
            ...##|||#|
            .||##|||||
            ||||||||||
            ||||||||||
            ||||||||||
            ||||||||||
            MAP,

            <<<MAP
            .....|.#..
            ...||||#..
            .|.#||||..
            ..###||||#
            ...###||#|
            |||##|||||
            ||||||||||
            ||||||||||
            ||||||||||
            ||||||||||
            MAP,

            <<<MAP
            ....|||#..
            ...||||#..
            .|.##||||.
            ..####|||#
            .|.###||#|
            |||###||||
            ||||||||||
            ||||||||||
            ||||||||||
            ||||||||||
            MAP,

            <<<MAP
            ...||||#..
            ...||||#..
            .|.###|||.
            ..#.##|||#
            |||#.##|#|
            |||###||||
            ||||#|||||
            ||||||||||
            ||||||||||
            ||||||||||
            MAP,

            <<<MAP
            ...||||#..
            ..||#|##..
            .|.####||.
            ||#..##||#
            ||##.##|#|
            |||####|||
            |||###||||
            ||||||||||
            ||||||||||
            ||||||||||
            MAP,

            <<<MAP
            ..||||##..
            ..|#####..
            |||#####|.
            ||#...##|#
            ||##..###|
            ||##.###||
            |||####|||
            ||||#|||||
            ||||||||||
            ||||||||||
            MAP,

            <<<MAP
            ..||###...
            .||#####..
            ||##...##.
            ||#....###
            |##....##|
            ||##..###|
            ||######||
            |||###||||
            ||||||||||
            ||||||||||
            MAP,

            <<<MAP
            .||##.....
            ||###.....
            ||##......
            |##.....##
            |##.....##
            |##....##|
            ||##.####|
            ||#####|||
            ||||#|||||
            ||||||||||
            MAP,
        ];

        $map = Map::fromString(array_shift($given));
        $sut = ConstructionProject::ofMap($map);
        while ($expected = array_shift($given)) {
            $map = Map::fromString($expected);
            $sut = $sut->step();
            $actual = $sut->toMap($map->width);
            self::assertSame((string)$map, (string)$actual);
        }
    }
}
